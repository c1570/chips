typedef struct {
    uint16_t address;
    const char *name;
    int flag;
} c64rom_routine_t;

const c64rom_routine_t c64_rom_routines[] = {
    { 0xE500, "IOBASE", 1 },
    { 0xE505, "SCRORG", 1 },
    { 0xE50A, "PLOT", 1 },
    { 0xE513, "PLOT10", 1 },
    { 0xE560, "CLEAR1", 1 },
    { 0xE566, "NXTD", 1 },
    { 0xE570, "FNDSTR", 1 },
    { 0xE57C, "STOK", 1 },
    { 0xE582, "FNDEND", 1 },
    { 0xE591, "FINPUT", 1 },
    { 0xE598, "FINPUX", 1 },
    { 0xE59A, "VPAN", 1 },
    { 0xE5A0, "PANIC", 1 },
    { 0xE5A8, "INITV", 1 },
    { 0xE5AA, "PX4", 1 },
    { 0xE5B4, "LP2", 1 },
    { 0xE5B9, "LP1", 1 },
    { 0xE5CA, "LOOP4", 1 },
    { 0xE5E7, "LP21", 1 },
    { 0xE5F3, "LP23", 1 },
    { 0xE5FE, "LP22", 1 },
    { 0xE606, "CLP5", 1 },
    { 0xE60F, "CLP6", 1 },
    { 0xE632, "LOOP5", 1 },
    { 0xE63A, "LOP5", 1 },
    { 0xE640, "LOP51", 1 },
    { 0xE64A, "LOP54", 1 },
    { 0xE650, "LOP52", 1 },
    { 0xE654, "LOP53", 1 },
    { 0xE65D, "CLP2", 1 },
    { 0xE66F, "CLP2A", 1 },
    { 0xE672, "CLP21", 1 },
    { 0xE674, "CLP1", 1 },
    { 0xE682, "CLP7", 1 },
    { 0xE684, "QTSWC", 1 },
    { 0xE690, "QTSWL", 1 },
    { 0xE691, "NXT33", 1 },
    { 0xE693, "NXT3", 1 },
    { 0xE697, "NC3", 1 },
    { 0xE699, "NVS", 1 },
    { 0xE69F, "NVS1", 1 },
    { 0xE6A8, "LOOP2", 1 },
    { 0xE6B0, "LOP2", 1 },
    { 0xE6DA, "WLOG30", 1 },
    { 0xE6F7, "WLOG10", 1 },
    { 0xE700, "WLGRTS", 1 },
    { 0xE701, "BKLN", 1 },
    { 0xE70B, "BKLN1", 1 },
    { 0xE716, "PRT", 1 },
    { 0xE731, "NJT1", 1 },
    { 0xE73D, "NJT8", 1 },
    { 0xE73F, "NJT9", 1 },
    { 0xE745, "NTCN", 1 },
    { 0xE74C, "CNC3X", 1 },
    { 0xE759, "BAK1UP", 1 },
    { 0xE75F, "BK1", 1 },
    { 0xE762, "BK15", 1 },
    { 0xE773, "BK2", 1 },
    { 0xE77E, "NTCN1", 1 },
    { 0xE782, "CNC3", 1 },
    { 0xE785, "NC3W", 1 },
    { 0xE78B, "NC1", 1 },
    { 0xE792, "NC2", 1 },
    { 0xE7A8, "JPL4", 1 },
    { 0xE7AA, "NCZ2", 1 },
    { 0xE7AD, "NCX2", 1 },
    { 0xE7C0, "CURS10", 1 },
    { 0xE7C8, "GOTDWN", 1 },
    { 0xE7CB, "JPL3", 1 },
    { 0xE7CE, "COLR1", 1 },
    { 0xE7EA, "UP5", 1 },
    { 0xE7FE, "INS3", 1 },
    { 0xE805, "INS1", 1 },
    { 0xE80A, "INS2", 1 },
    { 0xE826, "INSEXT", 1 },
    { 0xE829, "UP9", 1 },
    { 0xE82D, "UP6", 1 },
    { 0xE832, "UP2", 1 },
    { 0xE847, "UPALIN", 1 },
    { 0xE84C, "NXT2", 1 },
    { 0xE854, "NXT6", 1 },
    { 0xE864, "BAKBAK", 1 },
    { 0xE86A, "NXT61", 1 },
    { 0xE871, "JPL2", 1 },
    { 0xE87C, "NXLN", 1 },
    { 0xE880, "NXLN2", 1 },
    { 0xE888, "NXLN1", 1 },
    { 0xE89E, "JPL5", 1 },
    { 0xE8A1, "CHKBAK", 1 },
    { 0xE8A5, "CHKLUP", 1 },
    { 0xE8B0, "BACK", 1 },
    { 0xE8B3, "CHKDWN", 1 },
    { 0xE8B7, "DWNCHK", 1 },
    { 0xE8C2, "DNLINE", 1 },
    { 0xE8CA, "DWNBYE", 1 },
    { 0xE8CD, "CHK1A", 1 },
    { 0xE8EA, "SCROL", 1 },
    { 0xE8F6, "SCRO0", 1 },
    { 0xE8FF, "SCR10", 1 },
    { 0xE918, "SCRL5", 1 },
    { 0xE922, "SCRL3", 1 },
    { 0xE94D, "MLP4", 1 },
    { 0xE956, "MLP42", 1 },
    { 0xE958, "PULIND", 1 },
    { 0xE967, "BMT1", 1 },
    { 0xE96C, "BMT2", 1 },
    { 0xE981, "NEWLX", 1 },
    { 0xE98F, "SCD10", 1 },
    { 0xE9BA, "SCRD19", 1 },
    { 0xE9F0, "SETPNT", 1 },
    { 0xE9FF, "CLRLN", 1 },
    { 0xEA07, "CLR10", 1 },
    { 0xEA13, "DSPP", 1 },
    { 0xEA1C, "DSPP2", 1 },
    { 0xEA24, "SCOLOR", 1 },
    { 0xEA31, "KEY", 1 },
    { 0xEA3E, "REPDO", 1 },
    { 0xEA5C, "KEY5", 1 },
    { 0xEA61, "KEY4", 1 },
    { 0xEA71, "KEY3", 1 },
    { 0xEA7B, "KL2", 1 },
    { 0xEA7E, "KPREND", 1 },
    { 0xEA87, "SCNKEY", 1 },
    { 0xEAA8, "SCN20", 1 },
    { 0xEAAB, "SCN22", 1 },
    { 0xEAB3, "SCN30", 1 },
    { 0xEACB, "CKUT", 1 },
    { 0xEACC, "CKIT", 1 },
    { 0xEADC, "CKIT1", 1 },
    { 0xEAE0, "REKEY", 1 },
    { 0xEAF0, "RPT10", 1 },
    { 0xEAFB, "SCNOUT", 1 },
    { 0xEB0D, "RPT20", 1 },
    { 0xEB17, "RPT40", 1 },
    { 0xEB30, "CKIT3", 1 },
    { 0xEB42, "SCNRTS", 1 },
    { 0xEB59, "SWITCH", 1 },
    { 0xEC58, "ULSET", 1 },
    { 0xEC5B, "OUTHRE", 1 },
    { 0xEC72, "LEXIT", 1 },
    { 0xECE7, "RUNTB", 1 },
    { 0xED09, "TALK", 1 },
    { 0xED0C, "LISTN", 1 },
    { 0xED11, "LIST1", 1 },
    { 0xED20, "LIST2", 1 },
    { 0xED2E, "LIST5", 1 },
    { 0xED36, "ISOURA", 1 },
    { 0xED40, "ISOUR", 1 },
    { 0xED50, "ISR02", 1 },
    { 0xED55, "ISR03", 1 },
    { 0xED5A, "NOEOI", 1 },
    { 0xED66, "ISR01", 1 },
    { 0xED7A, "ISRHI", 1 },
    { 0xED7D, "ISRCLK", 1 },
    { 0xED9F, "ISR04", 1 },
    { 0xEDAD, "NODEV", 1 },
    { 0xEDAF, "FRMERR", 1 },
    { 0xEDB2, "CSBERR", 1 },
    { 0xEDB9, "SECND", 1 },
    { 0xEDBE, "SCATN", 1 },
    { 0xEDC7, "TKSA", 1 },
    { 0xEDD6, "TKATN1", 1 },
    { 0xEDDD, "CIOUT", 1 },
    { 0xEDE6, "CI2", 1 },
    { 0xEDEB, "CI4", 1 },
    { 0xEDEF, "UNTLK", 1 },
    { 0xEDFE, "UNLSN", 1 },
    { 0xEE03, "DLABYE", 1 },
    { 0xEE06, "DLADLH", 1 },
    { 0xEE09, "DLAD00", 1 },
    { 0xEE1B, "ACP00A", 1 },
    { 0xEE30, "ACP00", 1 },
    { 0xEE3E, "ACP00B", 1 },
    { 0xEE47, "ACP00C", 1 },
    { 0xEE56, "ACP01", 1 },
    { 0xEE5A, "ACP03", 1 },
    { 0xEE67, "ACP03A", 1 },
    { 0xEE80, "ACP04", 1 },
    { 0xEEA9, "DEBPIA", 1 },
    { 0xEEB6, "W1MS1", 1 },
    { 0xEEBB, "RSTRAB", 1 },
    { 0xEEC8, "RST005", 1 },
    { 0xEED1, "RSTEXT", 1 },
    { 0xEED7, "RST010", 1 },
    { 0xEEE6, "RSWEXT", 1 },
    { 0xEEE7, "RSPEXT", 1 },
    { 0xEEF6, "RST030", 1 },
    { 0xEEFC, "RST040", 1 },
    { 0xEF00, "RST050", 1 },
    { 0xEF06, "RSTBGN", 1 },
    { 0xEF13, "RST060", 1 },
    { 0xEF1C, "RST070", 1 },
    { 0xEF1E, "RST080", 1 },
    { 0xEF2E, "DSRERR", 1 },
    { 0xEF31, "CTSERR", 1 },
    { 0xEF39, "RSODNE", 1 },
    { 0xEF3B, "OENABL", 1 },
    { 0xEF4A, "BITCNT", 1 },
    { 0xEF54, "BIT010", 1 },
    { 0xEF58, "BIT020", 1 },
    { 0xEF59, "RSRCVR", 1 },
    { 0xEF6D, "RSREXT", 1 },
    { 0xEF6E, "RSR018", 1 },
    { 0xEF70, "RSR020", 1 },
    { 0xEF7E, "RSRABL", 1 },
    { 0xEF8B, "RSRSXT", 1 },
    { 0xEF90, "RSRTRT", 1 },
    { 0xEF97, "RSR030", 1 },
    { 0xEFA9, "RSR031", 1 },
    { 0xEFB1, "RSR032", 1 },
    { 0xEFC5, "RSR050", 1 },
    { 0xEFCA, "RECERR", 1 },
    { 0xEFCD, "BREAKE", 1 },
    { 0xEFD0, "FRAMEE", 1 },
    { 0xEFD2, "ERR232", 1 },
    { 0xEFDB, "RSR060", 1 },
    { 0xEFE1, "CKO232", 1 },
    { 0xEFF2, "CKO020", 1 },
    { 0xEFF9, "CKO030", 1 },
    { 0xF006, "CKO040", 1 },
    { 0xF00D, "CKDSRX", 1 },
    { 0xF012, "CKO100", 1 },
    { 0xF014, "BSOBAD", 1 },
    { 0xF017, "BSO232", 1 },
    { 0xF028, "BSO100", 1 },
    { 0xF02E, "BSO110", 1 },
    { 0xF04C, "BSO120", 1 },
    { 0xF04D, "CKI232", 1 },
    { 0xF062, "CKI010", 1 },
    { 0xF070, "CKI020", 1 },
    { 0xF077, "CKI080", 1 },
    { 0xF07D, "CKI100", 1 },
    { 0xF084, "CKI110", 1 },
    { 0xF086, "BSI232", 1 },
    { 0xF09C, "BSI010", 1 },
    { 0xF0A4, "RSP232", 1 },
    { 0xF0AA, "RSPOFF", 1 },
    { 0xF0BB, "RSPOK", 1 },
    { 0xF12B, "SPMSG", 1 },
    { 0xF12F, "MSG", 1 },
    { 0xF13C, "MSG10", 1 },
    { 0xF13E, "NGETIN", 1 },
    { 0xF14A, "GN10", 1 },
    { 0xF14E, "GN232", 1 },
    { 0xF155, "GN20", 1 },
    { 0xF157, "NBASIN", 1 },
    { 0xF166, "BN10", 1 },
    { 0xF173, "BN20", 1 },
    { 0xF18D, "JTG35", 1 },
    { 0xF193, "JTG36", 1 },
    { 0xF196, "JTG37", 1 },
    { 0xF199, "JTGET", 1 },
    { 0xF1A9, "JTG10", 1 },
    { 0xF1AD, "BN30", 1 },
    { 0xF1B1, "BN31", 1 },
    { 0xF1B3, "BN32", 1 },
    { 0xF1B4, "BN33", 1 },
    { 0xF1B5, "BN35", 1 },
    { 0xF1B8, "BN50", 1 },
    { 0xF1CA, "NBSOUT", 1 },
    { 0xF1DB, "BO20", 1 },
    { 0xF1DD, "CASOUT", 1 },
    { 0xF1F8, "JTP10", 1 },
    { 0xF1FC, "RSTOA", 1 },
    { 0xF1FD, "RSTOR", 1 },
    { 0xF207, "RSTOR1", 1 },
    { 0xF208, "BO50", 1 },
    { 0xF20E, "NCHKIN", 1 },
    { 0xF216, "JX310", 1 },
    { 0xF22A, "JX315", 1 },
    { 0xF233, "JX320", 1 },
    { 0xF237, "JX330", 1 },
    { 0xF245, "JX340", 1 },
    { 0xF248, "JX350", 1 },
    { 0xF250, "NCKOUT", 1 },
    { 0xF258, "CK5", 1 },
    { 0xF25F, "CK20", 1 },
    { 0xF262, "CK10", 1 },
    { 0xF26F, "CK15", 1 },
    { 0xF275, "CK30", 1 },
    { 0xF279, "CK40", 1 },
    { 0xF286, "CK50", 1 },
    { 0xF289, "CK60", 1 },
    { 0xF291, "NCLOSE", 1 },
    { 0xF298, "JX050", 1 },
    { 0xF2BA, "CLS010", 1 },
    { 0xF2BF, "CLS020", 1 },
    { 0xF2C8, "JX115", 1 },
    { 0xF2E0, "JX117", 1 },
    { 0xF2EE, "JX120", 1 },
    { 0xF2F1, "JX150", 1 },
    { 0xF2F2, "JXRMV", 1 },
    { 0xF30D, "JX170", 1 },
    { 0xF30E, "JX175", 1 },
    { 0xF30F, "LOOKUP", 1 },
    { 0xF314, "JLTLK", 1 },
    { 0xF316, "JX600", 1 },
    { 0xF31F, "JZ100", 1 },
    { 0xF32E, "JZ101", 1 },
    { 0xF32F, "NCLALL", 1 },
    { 0xF333, "NCLRCH", 1 },
    { 0xF33C, "JX750", 1 },
    { 0xF343, "CLALL2", 1 },
    { 0xF34A, "NOPEN", 1 },
    { 0xF351, "OP98", 1 },
    { 0xF359, "OP100", 1 },
    { 0xF362, "OP110", 1 },
    { 0xF384, "OP150", 1 },
    { 0xF38B, "OP152", 1 },
    { 0xF393, "OP155", 1 },
    { 0xF3AC, "OP160", 1 },
    { 0xF3AF, "OP170", 1 },
    { 0xF3B8, "OP200", 1 },
    { 0xF3C2, "OP171", 1 },
    { 0xF3D1, "OP172", 1 },
    { 0xF3D3, "OP175", 1 },
    { 0xF3D4, "OP180", 1 },
    { 0xF3D5, "OPENI", 1 },
    { 0xF3F6, "OP35", 1 },
    { 0xF3FC, "OP40", 1 },
    { 0xF406, "OP45", 1 },
    { 0xF409, "OPN232", 1 },
    { 0xF40F, "OPN020", 1 },
    { 0xF41D, "OPN025", 1 },
    { 0xF43A, "OPN026", 1 },
    { 0xF440, "OPN027", 1 },
    { 0xF446, "OPN028", 1 },
    { 0xF44D, "OPN030", 1 },
    { 0xF45C, "OPN050", 1 },
    { 0xF468, "OPN055", 1 },
    { 0xF474, "OPN060", 1 },
    { 0xF47D, "MEMTCF", 1 },
    { 0xF483, "CLN232", 1 },
    { 0xF49E, "LOADSP", 1 },
    { 0xF4A2, "LOAD", 1 },
    { 0xF4A5, "NLOAD", 1 },
    { 0xF4AF, "LD10", 1 },
    { 0xF4B2, "LD20", 1 },
    { 0xF4BF, "LD25", 1 },
    { 0xF4F0, "LD30", 1 },
    { 0xF4F3, "LD40", 1 },
    { 0xF501, "LD45", 1 },
    { 0xF51C, "LD50", 1 },
    { 0xF51E, "LD60", 1 },
    { 0xF524, "LD64", 1 },
    { 0xF530, "LD90", 1 },
    { 0xF533, "LD100", 1 },
    { 0xF539, "LD102", 1 },
    { 0xF541, "LD104", 1 },
    { 0xF549, "LD112", 1 },
    { 0xF556, "LD150", 1 },
    { 0xF55D, "LD170", 1 },
    { 0xF56C, "LD177", 1 },
    { 0xF579, "LD178", 1 },
    { 0xF57D, "LD179", 1 },
    { 0xF5A9, "LD180", 1 },
    { 0xF5AE, "LD190", 1 },
    { 0xF5AF, "LUKING", 1 },
    { 0xF5C1, "OUTFN", 1 },
    { 0xF5C7, "LD110", 1 },
    { 0xF5D1, "LD115", 1 },
    { 0xF5D2, "LODING", 1 },
    { 0xF5DA, "LD410", 1 },
    { 0xF5DD, "SAVESP", 1 },
    { 0xF5EA, "SAVE", 1 },
    { 0xF5ED, "NSAVE", 1 },
    { 0xF5F1, "SV10", 1 },
    { 0xF5F4, "SV20", 1 },
    { 0xF605, "SV25", 1 },
    { 0xF624, "SV30", 1 },
    { 0xF633, "BREAK", 1 },
    { 0xF63A, "SV40", 1 },
    { 0xF63F, "SV50", 1 },
    { 0xF642, "CLSEI", 1 },
    { 0xF654, "CUNLSN", 1 },
    { 0xF657, "CLSEI2", 1 },
    { 0xF659, "SV100", 1 },
    { 0xF65F, "SV102", 1 },
    { 0xF66C, "SV105", 1 },
    { 0xF676, "SV106", 1 },
    { 0xF68D, "SV110", 1 },
    { 0xF68E, "SV115", 1 },
    { 0xF68F, "SAVING", 1 },
    { 0xF69B, "UDTIM", 1 },
    { 0xF69D, "UD20", 1 },
    { 0xF6A7, "UD30", 1 },
    { 0xF6BC, "UD60", 1 },
    { 0xF6CC, "UD70", 1 },
    { 0xF6DA, "UD80", 1 },
    { 0xF6DC, "UD90", 1 },
    { 0xF6DD, "RDTIM", 1 },
    { 0xF6E4, "SETTIM", 1 },
    { 0xF6ED, "NSTOP", 1 },
    { 0xF6FA, "STOP2", 1 },
    { 0xF6FB, "ERROR1", 1 },
    { 0xF6FE, "ERROR2", 1 },
    { 0xF701, "ERROR3", 1 },
    { 0xF704, "ERROR4", 1 },
    { 0xF707, "ERROR5", 1 },
    { 0xF70A, "ERROR6", 1 },
    { 0xF70D, "ERROR7", 1 },
    { 0xF710, "ERROR8", 1 },
    { 0xF713, "ERROR9", 1 },
    { 0xF729, "EREXIT", 1 },
    { 0xF72C, "FAH", 1 },
    { 0xF74B, "FAH50", 1 },
    { 0xF757, "FAH55", 1 },
    { 0xF761, "FAH56", 1 },
    { 0xF767, "FAH45", 1 },
    { 0xF769, "FAH40", 1 },
    { 0xF76A, "TAPEH", 1 },
    { 0xF781, "BLNK2", 1 },
    { 0xF7A5, "TH20", 1 },
    { 0xF7B7, "TH30", 1 },
    { 0xF7CF, "TH40", 1 },
    { 0xF7D0, "ZZZ", 1 },
    { 0xF7D7, "LDAD1", 1 },
    { 0xF7EA, "FAF", 1 },
    { 0xF7F7, "FAF20", 1 },
    { 0xF80B, "FAF30", 1 },
    { 0xF80C, "FAF40", 1 },
    { 0xF80D, "JTP20", 1 },
    { 0xF817, "CSTE1", 1 },
    { 0xF81E, "CS30", 1 },
    { 0xF821, "CS40", 1 },
    { 0xF82E, "CS10", 1 },
    { 0xF836, "CS25", 1 },
    { 0xF838, "CSTE2", 1 },
    { 0xF841, "RBLK", 1 },
    { 0xF84A, "TRD", 1 },
    { 0xF864, "WBLK", 1 },
    { 0xF867, "TWRT", 1 },
    { 0xF86B, "TWRT2", 1 },
    { 0xF86E, "TWRT3", 1 },
    { 0xF875, "TAPE", 1 },
    { 0xF8B5, "TP32", 1 },
    { 0xF8B7, "TP35", 1 },
    { 0xF8BE, "TP40", 1 },
    { 0xF8D0, "TSTOP", 1 },
    { 0xF8DC, "STOP3", 1 },
    { 0xF8E1, "STOP4", 1 },
    { 0xF8E2, "STT1", 1 },
    { 0xF8F7, "STT2", 1 },
    { 0xF8FE, "STT3", 1 },
    { 0xF92A, "STT4", 1 },
    { 0xF92C, "READ", 1 },
    { 0xF969, "RJDJ", 1 },
    { 0xF988, "JRAD2", 1 },
    { 0xF98B, "SRER", 1 },
    { 0xF993, "RADX2", 1 },
    { 0xF997, "RADL", 1 },
    { 0xF999, "RAD5", 1 },
    { 0xF9AC, "RDBK", 1 },
    { 0xF9BC, "RADKX", 1 },
    { 0xF9C9, "RADP", 1 },
    { 0xF9D2, "RADBK", 1 },
    { 0xF9D5, "RAD3", 1 },
    { 0xF9DE, "ROUT2", 1 },
    { 0xF9E0, "ROUT1", 1 },
    { 0xF9F7, "RAD4", 1 },
    { 0xFA10, "RAD2", 1 },
    { 0xFA18, "RAD2Y", 1 },
    { 0xFA1F, "RAD2X", 1 },
    { 0xFA44, "RADQ2", 1 },
    { 0xFA53, "RADK", 1 },
    { 0xFA5D, "RDBK2", 1 },
    { 0xFA60, "RADJ", 1 },
    { 0xFA70, "RD15", 1 },
    { 0xFA86, "RD12", 1 },
    { 0xFA8A, "RD10", 1 },
    { 0xFA8D, "RD20", 1 },
    { 0xFAA3, "RD22", 1 },
    { 0xFAA9, "RD200", 1 },
    { 0xFABA, "RD40", 1 },
    { 0xFAC0, "RD60", 1 },
    { 0xFACE, "RD70", 1 },
    { 0xFAEB, "RD80", 1 },
    { 0xFB08, "RD58", 1 },
    { 0xFB2F, "RD52", 1 },
    { 0xFB33, "RD55", 1 },
    { 0xFB3A, "RD59", 1 },
    { 0xFB43, "RD90", 1 },
    { 0xFB48, "RD160", 1 },
    { 0xFB4A, "RD161", 1 },
    { 0xFB5C, "RD167", 1 },
    { 0xFB68, "RD175", 1 },
    { 0xFB72, "VPRTY", 1 },
    { 0xFB8B, "RD180", 1 },
    { 0xFB8E, "RD300", 1 },
    { 0xFB97, "NEWCH", 1 },
    { 0xFBA6, "WRITE", 1 },
    { 0xFBAD, "WRTW", 1 },
    { 0xFBAF, "WRT1", 1 },
    { 0xFBB1, "WRTX", 1 },
    { 0xFBC8, "WRTL3", 1 },
    { 0xFBCD, "WRTN", 1 },
    { 0xFBE3, "WRTN1", 1 },
    { 0xFBF0, "WRTN2", 1 },
    { 0xFC09, "WRT3", 1 },
    { 0xFC0C, "WRT2", 1 },
    { 0xFC16, "WRTS", 1 },
    { 0xFC22, "WRTS1", 1 },
    { 0xFC2C, "WRT61", 1 },
    { 0xFC30, "WRT6", 1 },
    { 0xFC3F, "WRT7", 1 },
    { 0xFC4E, "WRT4", 1 },
    { 0xFC54, "WRTBK", 1 },
    { 0xFC57, "WRNC", 1 },
    { 0xFC5E, "WREND", 1 },
    { 0xFC6A, "WRTZ", 1 },
    { 0xFC93, "TNIF", 1 },
    { 0xFCB6, "TNIQ", 1 },
    { 0xFCB8, "STKY", 1 },
    { 0xFCBD, "BSIV", 1 },
    { 0xFCCA, "TNOF", 1 },
    { 0xFCD1, "CMPSTE", 1 },
    { 0xFCDB, "INCSAL", 1 },
    { 0xFCE1, "INCR", 1 },
    { 0xFCE2, "START", 1 },
    { 0xFCEF, "START1", 1 },
    { 0xFD02, "A0INT", 1 },
    { 0xFD04, "A0IN1", 1 },
    { 0xFD0F, "A0IN2", 1 },
    { 0xFD10, "TBLA0R", 1 },
    { 0xFD15, "RESTOR", 1 },
    { 0xFD1A, "VECTOR", 1 },
    { 0xFD20, "MOVOS1", 1 },
    { 0xFD27, "MOVOS2", 1 },
    { 0xFD50, "RAMTAS", 1 },
    { 0xFD53, "RAMTZ0", 1 },
    { 0xFD6C, "RAMTZ1", 1 },
    { 0xFD6E, "RAMTZ2", 1 },
    { 0xFD88, "SIZE", 1 },
    { 0xFD9B, "BSIT", 1 },
    { 0xFDA3, "IOINIT", 1 },
    { 0xFDDD, "IOKEYS", 1 },
    { 0xFDEC, "I0010", 1 },
    { 0xFDF3, "I0020", 1 },
    { 0xFDF9, "SETNAM", 1 },
    { 0xFE00, "SETLFS", 1 },
    { 0xFE07, "READSS", 1 },
    { 0xFE18, "SETMSG", 1 },
    { 0xFE1A, "READST", 1 },
    { 0xFE1C, "UDST", 1 },
    { 0xFE21, "SETTMO", 1 },
    { 0xFE25, "MEMTOP", 1 },
    { 0xFE27, "GETTOP", 1 },
    { 0xFE2D, "SETTOP", 1 },
    { 0xFE34, "MEMBOT", 1 },
    { 0xFE3C, "SETBOT", 1 },
    { 0xFE43, "NMI", 1 },
    { 0xFE47, "NNMI", 1 },
    { 0xFE4C, "NNMI10", 1 },
    { 0xFE56, "NNMI18", 1 },
    { 0xFE66, "TIMB", 1 },
    { 0xFE72, "NNMI20", 1 },
    { 0xFE9A, "NNMI22", 1 },
    { 0xFE9D, "NNMI25", 1 },
    { 0xFEA3, "NNMI30", 1 },
    { 0xFEAE, "NNMI40", 1 },
    { 0xFEB6, "NMIRTI", 1 },
    { 0xFEBC, "PREND", 1 },
    { 0xFED6, "T2NMI", 1 },
    { 0xFF2E, "POPEN", 1 },
    { 0xFF43, "SIMIRQ", 1 },
    { 0xFF48, "PULS", 1 },
    { 0xFF58, "PULS1", 1 },
    { 0xFFC0, "OPEN", 1 },
    { 0xFFC3, "CLOSE", 1 },
    { 0xFFC6, "CHKIN", 1 },
    { 0xFFC9, "CKOUT", 1 },
    { 0xFFCC, "CLRCH", 1 },
    { 0xFFCF, "BASIN", 1 },
    { 0xFFD2, "BSOUT", 1 },
    { 0xFFE1, "STOP", 1 },
    { 0xFFE4, "GETIN", 1 },
    { 0xFFE7, "CLALL", 1 },
    { 0xFFED, "JSCROG", 1 },
    { 0xFFF0, "JPLOT", 1 },
    { 0xFFF3, "JIOBAS", 1 },
};

static const int C64_ROM_ROUTINES_COUNT = sizeof(c64_rom_routines) / sizeof(c64_rom_routines[0]);

c64rom_routine_t* _get_c64_in_rom_routine(uint16_t addr) {
    int left = 0;
    int right = C64_ROM_ROUTINES_COUNT - 1;

    if (addr < c64_rom_routines[left].address) {
        return NULL;
    }

    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (c64_rom_routines[mid].address == addr) {
            return &c64_rom_routines[mid];
        }
        if (c64_rom_routines[mid].address < addr) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return &c64_rom_routines[right];
}

static void _c64_debug_out_processor_pc(c64_t* sys, uint64_t pins) {
    if (pins & M6502_SYNC) {
        uint16_t cpu_pc = m6502_pc(&sys->cpu);
        c64_rom_routine_t* in_c64_rom_routine = _get_c64_in_rom_routine(cpu_pc);
        if (in_c64_rom_routine == NULL) {
            return;
        }
        uint16_t function_address = in_c64_rom_routine->address;
        uint16_t address_diff = cpu_pc - function_address;
        const char* function_name = in_c64_rom_routine->name;
        char iec_status[5];
        char local_iec_status[5];
        iec_get_status_text(&sys->iec_bus, iec_status);
        iec_get_device_status_text(sys->iec_device, local_iec_status);

        fprintf(sys->debug_file, "tick:%10ld\taddr:%04x\tsys:c64 \tbus-iec:%s\tlocal-iec:%s\tlabel:%s+%x\n", get_world_tick(), cpu_pc, iec_status, local_iec_status, function_name, address_diff);
    }
}
